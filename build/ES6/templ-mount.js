const _cachedTemplates={},fetchInProgress={};export function loadTemplate(template,params){const src=template.dataset.src;if(src){if(_cachedTemplates[src]){template.innerHTML=_cachedTemplates[src];if(params)customElements.define(params.tagName,params.cls)}else{if(fetchInProgress[src]){if(params){setTimeout(()=>{loadTemplate(template,params)},100)}return}fetchInProgress[src]=!0;fetch(src,{credentials:"include"}).then(resp=>{resp.text().then(txt=>{fetchInProgress[src]=!1;_cachedTemplates[src]=txt;template.innerHTML=txt;template.setAttribute("loaded","");if(params)customElements.define(params.tagName,params.cls)})})}}else{if(params)customElements.define(params.tagName,params.cls)}}export function qsa(css,from){return[].slice.call((from?from:this).querySelectorAll(css))}export class TemplMount extends HTMLElement{constructor(){super();if(!TemplMount._alreadyDidGlobalCheck){TemplMount._alreadyDidGlobalCheck=!0;this.loadTemplatesOutsideShadowDOM();if("loading"===document.readyState){document.addEventListener("DOMContentLoaded",()=>{this.loadTemplatesOutsideShadowDOM();this.monitorHeadForTemplates()})}else{this.monitorHeadForTemplates()}}}static get is(){return"templ-mount"}getHost(){const parent=this.parentNode;return parent.host}loadTemplates(from){qsa("template[data-src]",from).forEach(externalRefTemplate=>{loadTemplate(externalRefTemplate)})}loadTemplatesOutsideShadowDOM(){this.loadTemplates(document)}loadTemplateInsideShadowDOM(){const host=this.getHost();if(!host)return;this.loadTemplates(host)}monitorHeadForTemplates(){this._observer=new MutationObserver(mutationsList=>{mutationsList.forEach(mutationRecord=>{mutationRecord.addedNodes.forEach(node=>{if("TEMPLATE"===node.tagName)loadTemplate(node)})})})}connectedCallback(){this.loadTemplateInsideShadowDOM();if("loading"===document.readyState){document.addEventListener("DOMContentLoaded",()=>{this.loadTemplateInsideShadowDOM()})}}}TemplMount._alreadyDidGlobalCheck=!1;if(!customElements.get(TemplMount.is)){customElements.define(TemplMount.is,TemplMount)}