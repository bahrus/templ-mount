import{loadTemplate}from"./first-templ.js";export var TemplMount=function(_HTMLElement){babelHelpers.inherits(TemplMount,_HTMLElement);function TemplMount(){var _this;babelHelpers.classCallCheck(this,TemplMount);_this=babelHelpers.possibleConstructorReturn(this,(TemplMount.__proto__||Object.getPrototypeOf(TemplMount)).call(this));if(!TemplMount._alreadyDidGlobalCheck){TemplMount._alreadyDidGlobalCheck=!0;_this.loadTemplatesOutsideShadowDOM();if("loading"===document.readyState){document.addEventListener("DOMContentLoaded",function(){_this.loadTemplatesOutsideShadowDOM();_this.monitorHeadForTemplates()})}else{_this.monitorHeadForTemplates()}}return _this}babelHelpers.createClass(TemplMount,[{key:"getHost",value:function getHost(){var parent=this.parentNode;return parent.host}},{key:"loadTemplates",value:function loadTemplates(from){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=from.querySelectorAll("template[data-src]")[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var externalRefTemplate=_step.value,ds=externalRefTemplate.dataset,ua=ds.ua;if(ua&&-1===navigator.userAgent.indexOf(ua))return;if(!ds.dumped){document.head.appendChild(externalRefTemplate.content.cloneNode(!0));ds.dumped="true"}loadTemplate(externalRefTemplate)}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"loadTemplatesOutsideShadowDOM",value:function loadTemplatesOutsideShadowDOM(){this.loadTemplates(document)}},{key:"loadTemplateInsideShadowDOM",value:function loadTemplateInsideShadowDOM(){var host=this.getHost();if(!host)return;this.loadTemplates(host)}},{key:"monitorHeadForTemplates",value:function monitorHeadForTemplates(){this._observer=new MutationObserver(function(mutationsList){mutationsList.forEach(function(mutationRecord){mutationRecord.addedNodes.forEach(function(node){if("TEMPLATE"===node.tagName)loadTemplate(node)})})});this._observer.observe(document.head,{childList:!0})}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;this.loadTemplateInsideShadowDOM();if("loading"===document.readyState){document.addEventListener("DOMContentLoaded",function(){_this2.loadTemplateInsideShadowDOM()})}}}],[{key:"is",get:function get(){return"templ-mount"}}]);return TemplMount}(HTMLElement);TemplMount._alreadyDidGlobalCheck=!1;customElements.define(TemplMount.is,TemplMount);